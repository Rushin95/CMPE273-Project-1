<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
     <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
    {% for Q in Query %}
    <input type="" id="pck" value="{{Q.address}},{{Q.city}},{{Q.state}},{{Q.zip}}">
    {% endfor%}
 <style>
  #pck{
display:none;
}
 </style>
<style>
#rectangle{
    width:300px;
    height:300px;
    background:grey;
    border-radius: 25px;
    opacity: 0.5;
    text-align:center;
    padding-top: 50px;
    font-size: 250%;
    box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 1.2), 0 8px 22px 0 rgba(0, 0, 0, 0.40);
</style>
 <style>
       #map {
        height: 300px;
        width: 100%;
       }
 </style>
 <style>
 .paddingBetweenCols td
{
    padding:10px 15px 10px 15px;
}
</style>
    <script>
    function generate(){
              window.location ='/new';
         }


    </script>
</head>
<body>
<header>
        <div class="container">
            <h1 class="logo">Flask App</h1>
            <nav>
                <strong>
                    <ul class="menu">
                        <li><a href="{{ url_for('index') }}">Home</a></li>
                        <li><a href="{{ url_for('signup') }}">Sign Up</a></li>
                        <li><a href="{{ url_for('places') }}">Add Locations</a></li>
                        <li><a href="{{ url_for('addplaces') }}">Drop Locations</a></li>
                        <li><a href="{{ url_for('trip') }}">Trip Planner</a></li>
                        <li><a href="{{ url_for('about') }}">About</a></li>
                    </ul>
                </strong>
            </nav>
        </div>
    </header>
<div id="map"></div><br>
{% if length > 0 %}
     <table class="paddingBetweenCols">
         <tr>
         <td></td>
    {% for key in lyft.iteritems() %}
         {% if key[0] =='lyft' %}
            <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].avg_cost}}<br>
                      {% if key[0] ==minlyft %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
        {% elif key[0] =='lyft_premier'%}
                {%if key[1].avg_cost > 0 %}
                <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].avg_cost}}<br>
                      {% if key[0] ==minlyft %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
                {% endif    %}
        {% elif key[0] =='lyft_line'%}
                <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].avg_cost}}<br>
                      {% if key[0] ==minlyft %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
        {% elif key[0] =='lyft_plus'%}
               <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].avg_cost}}<br>
                      {% if key[0] ==minlyft %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
         {% endif %}
    {% endfor %}
    </tr>
     <tr>
       <td></td>
      {% for key in uber.iteritems() %}
         {% if key[0]!='OptimizedRoute'%}
            {% if key[0] =='uberX' %}
            <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].Price}}<br>
                      {% if key[0] ==min %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
            {% else %}
                <td><div id="rectangle">
                  <div class="content">
                      <strong>{{key[0]}}</strong><br>
                      ${{key[1].Price}}<br>
                      {% if key[0] ==min %}
                        {{"Cheapest Ride"}}
                      {% endif%}
                  </div>
             </div></td>
         {% endif %}
         {% endif %}
         {% endfor %}
     </tr>
     </table>
         <hr>
        <form action="/new" method="post">

                <button type="button"  value="submit" onclick="generate()" class="btn btn-default" style="margin-left:auto;margin-right:auto;display:block;margin-top:5%;margin-bottom:0%">Generate PDF</button>
        </form>
{% else %}
    <h1>NO address</h1>
{% endif %}
</body>
<script >
      function initMap()
      {
          var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: -34.397, lng: 150.644}
        });
        var geocoder = new google.maps.Geocoder();
        geocodeAddress(geocoder, map);
      }

        var locations=[]
        e = document.getElementsByTagName('input');
        for (i = 0; i < e.length+1; i++){
            test=e[i].value;
            locations.push(test);

        }
        function geocodeAddress(geocoder, resultsMap) {
        var pickup = sessionStorage.getItem('PickUp');
        var drop =   sessionStorage.getItem('Drop');
        var bounds = new google.maps.LatLngBounds();
        a=locations.length;
        for(i=0;i<a;i++)
        {
                var address = locations[i];
                geocoder.geocode({'address': address}, function(results, status)
                {
                  if (status === 'OK')
                  {
                    var marker = new google.maps.Marker({
                      map: resultsMap,
                      position: results[0].geometry.location
                    });
                    loc = new google.maps.LatLng(marker.position.lat(), marker.position.lng());

                    bounds.extend(loc);
                    resultsMap.fitBounds(bounds);
                    resultsMap.panToBounds(bounds);
                    }
                  else
                  {
                    alert('Geocode was not successful for the following reason: ' + status);
                  }
                });
            }
      }
</script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBn0gFUveJxGtZPXUm13w-DB85ALtcMy3s&callback=initMap">
    </script>
</html>
